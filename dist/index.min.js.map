{"version":3,"file":"index.min.js","sources":["../src/js/utils/raf.js","../src/js/utils/const.js","../src/js/littlething.js","../src/js/ambient.js","../src/config.js"],"sourcesContent":["// http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n// http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n\n// requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel\n\n// MIT license\n\n(function () {\n  let lastTime = 0\n  const vendors = ['ms', 'moz', 'webkit', 'o']\n  for (let x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n    window.requestAnimationFrame = window[`${vendors[x]}RequestAnimationFrame`]\n    window.cancelAnimationFrame = window[`${vendors[x]}CancelAnimationFrame`]\n                                 || window[`${vendors[x]}CancelRequestAnimationFrame`]\n  }\n\n  if (!window.requestAnimationFrame) {\n    window.requestAnimationFrame = function (callback, element) {\n      const currTime = new Date().getTime()\n      const timeToCall = Math.max(0, 16 - (currTime - lastTime))\n      const id = window.setTimeout(function () { callback(currTime + timeToCall) },\n        timeToCall)\n      lastTime = currTime + timeToCall\n      return id\n    }\n  }\n\n  if (!window.cancelAnimationFrame) {\n    window.cancelAnimationFrame = function (id) {\n      clearTimeout(id)\n    }\n  }\n}())\n","const id = 'little_thing'\nconst ID = id.toUpperCase()\n\nexport const O2_AMBIENT_MAIN = `O2_AMBIENT_${ID}_MAIN`\nexport const O2_AMBIENT_INIT = `O2_AMBIENT_${ID}_INIT`\nexport const O2_AMBIENT_CONFIG = `O2_AMBIENT_${ID}_CONFIG`\nexport const O2_AMBIENT_CLASSNAME = `o2_ambient_${id}`\nexport const O2_AMBIENT_CONFIG_KEY = `O2_AMBIENT_CONFIG_KEY`\nexport const O2_AMBIENT_IS_CONFIG_RESET = 'O2_AMBIENT_IS_CONFIG_RESET'\n","import { O2_AMBIENT_CONFIG } from './utils/const'\n\nimport red from './json/data'\nimport yellow from './json/data2'\nimport green from './json/data3'\nimport cyan from './json/data4'\nimport blue from './json/data5'\nimport purple from './json/data6'\n\nconst STYLE = {\n  'red': red,\n  'yellow': yellow,\n  'green': green,\n  'cyan': cyan,\n  'blue': blue,\n  'purple': purple\n}\n\nexport default class LittleThing {\n  constructor () {\n    this.wrap = document.getElementById('o2team_ambient_main')\n    this.config = window[O2_AMBIENT_CONFIG]\n    this.init()\n  }\n\n  init () {\n    this.create(red)\n    this.updateColor()\n  }\n\n  create () {  \n    let wrap = this.wrap\n    let animationData = STYLE[this.config['style']]\n    let loop = this.config['loop']\n    let scale = this.config['size']\n    // 清空\n    wrap.innerHTML = ''\n    \n    bodymovin.loadAnimation({\n      animationData,\n      renderer: 'svg',\n      loop,\n      autoplay: true,\n      container: wrap\n    })\n\n    let scaleNum = scale === 'big' \n      ? 1\n      : (scale === 'middle' \n        ? 0.6\n        : 0.3)\n    \n    this.wrap.style.transform = `scale(${scaleNum})`\n    this.wrap.style.webkitTransform = `scale(${scaleNum})`\n    \n  }\n\n  reset () {   \n    this.create()\n    this.updateColor()\n  }\n\n  updateColor () {\n    let matrix = this.rgbaToMatrix(this.config['color'])\n    let svgDom = `<feColorMatrix type=\"matrix\" color-interpolation-filters=\"sRGB\" values=\"${matrix}\">`\n    let filterDom = document.getElementsByTagName('filter')[0]\n    filterDom.innerHTML = svgDom\n  }\n\n  rgbaToMatrix (rgba) {\n    if (!rgba instanceof Array) return\n    const __toMatrixNum = (num) => {\n      let total = 255\n      return (num / total).toFixed(2) * 1\n    }\n\n    let r = __toMatrixNum(rgba[0])\n    let g = __toMatrixNum(rgba[1])\n    let b = __toMatrixNum(rgba[2])\n\n    return `${r} 0 0 0 0 0 ${g} 0 0 0 0 0 ${b} 0 0 0 0 0 1 0`\n  }\n}","import './utils/raf'\nimport {\n  O2_AMBIENT_INIT,\n  O2_AMBIENT_CONFIG,\n  O2_AMBIENT_MAIN\n} from './utils/const'\n\nimport LittleThing from './littlething'\n\n// 判断是否可点，被点中则隐藏\nlet wrapper = document.querySelector('.o2team_ambient_main')\nif (!wrapper) {\n  wrapper = document.createElement('div')\n  wrapper.setAttribute('class', 'o2team_ambient_main')\n  wrapper.setAttribute('id', 'o2team_ambient_main')\n  document.body.insertAdjacentElement('beforeend', wrapper)\n}\nwrapper.addEventListener('click', () => {\n  wrapper.style.display = 'none'\n})\n\n// 初始化函数\nfunction initAmbient () {\n  let littleThing = new LittleThing()\n  // 主函数暴露\n  window[O2_AMBIENT_MAIN] = littleThing\n}\n\n// 初始化函数\nwindow[O2_AMBIENT_INIT] = initAmbient\n\ntry {\n  // 保证配置读取顺序\n  let csi = setInterval(() => {\n    if (!window[O2_AMBIENT_CONFIG]) return\n    clearInterval(csi)\n    initAmbient()\n  }, 1000)\n} catch (e) {\n  console.log(e) \n}\n","import { O2_AMBIENT_CONFIG } from './js/utils/const'\nwindow[O2_AMBIENT_CONFIG] = {\n  loop: true,\n  style: 'cyan',\n  size: 'big',\n  color: [212, 54, 54]\n}\n"],"names":["lastTime","vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","callback","element","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","ID","toUpperCase","O2_AMBIENT_MAIN","O2_AMBIENT_INIT","O2_AMBIENT_CONFIG","STYLE","red","LittleThing","wrap","document","getElementById","config","init","create","updateColor","this","animationData","loop","scale","innerHTML","bodymovin","loadAnimation","renderer","autoplay","container","scaleNum","style","transform","webkitTransform","matrix","rgbaToMatrix","svgDom","getElementsByTagName","rgba","Array","__toMatrixNum","num","toFixed","r","g","b","wrapper","querySelector","initAmbient","littleThing","createElement","setAttribute","body","insertAdjacentElement","addEventListener","display","csi","setInterval","clearInterval","e","console","log","size","color"],"mappings":"2FAOC,mBACKA,EAAW,EACTC,EAAU,CAAC,KAAM,MAAO,SAAU,KAC/BC,EAAI,EAAGA,EAAID,EAAQE,SAAWC,OAAOC,wBAAyBH,EACrEE,OAAOC,sBAAwBD,iBAAUH,EAAQC,6BACjDE,OAAOE,qBAAuBF,iBAAUH,EAAQC,6BAChBE,iBAAUH,EAAQC,mCAG/CE,OAAOC,wBACVD,OAAOC,sBAAwB,SAAUE,EAAUC,OAC3CC,GAAW,IAAIC,MAAOC,UACtBC,EAAaC,KAAKC,IAAI,EAAG,IAAML,EAAWT,IAC1Ce,EAAKX,OAAOY,WAAW,WAAcT,EAASE,EAAWG,IAC7DA,UACFZ,EAAWS,EAAWG,EACfG,IAINX,OAAOE,uBACVF,OAAOE,qBAAuB,SAAUS,GACtCE,aAAaF,KAtBlB,GCPD,IACMG,EADK,eACGC,cAEDC,uBAAgCF,WAChCG,uBAAgCH,WAChCI,uBAAkCJ,ww0WCIzCK,EAAQ,KACLC,kxojBAQYC,qIAEZC,KAAOC,SAASC,eAAe,4BAC/BC,OAASzB,OAAOkB,QAChBQ,kGAIAC,OAAOP,QACPQ,mDAIDN,EAAOO,KAAKP,KACZQ,EAAgBX,EAAMU,KAAKJ,OAAL,OACtBM,EAAOF,KAAKJ,OAAL,KACPO,EAAQH,KAAKJ,OAAL,KAEZH,EAAKW,UAAY,GAEjBC,UAAUC,cAAc,CACtBL,cAAAA,EACAM,SAAU,MACVL,KAAAA,EACAM,UAAU,EACVC,UAAWhB,QAGTiB,EAAqB,QAAVP,EACX,EACW,WAAVA,EACC,GACA,QAEDV,KAAKkB,MAAMC,0BAAqBF,YAChCjB,KAAKkB,MAAME,gCAA2BH,4CAKtCZ,cACAC,wDAIDe,EAASd,KAAKe,aAAaf,KAAKJ,OAAL,OAC3BoB,oFAAoFF,QACxEpB,SAASuB,qBAAqB,UAAU,GAC9Cb,UAAYY,uCAGVE,SACPA,aAAgBC,YACfC,EAAgB,SAACC,UAEa,GAA1BA,EADI,KACSC,QAAQ,IAG3BC,EAAIH,EAAcF,EAAK,IACvBM,EAAIJ,EAAcF,EAAK,IACvBO,EAAIL,EAAcF,EAAK,oBAEjBK,wBAAeC,wBAAeC,8BCtExCC,EAAUhC,SAASiC,cAAc,wBAYrC,SAASC,QACHC,EAAc,IAAIrC,EAEtBrB,OAAOgB,GAAmB0C,EAdvBH,KACHA,EAAUhC,SAASoC,cAAc,QACzBC,aAAa,QAAS,uBAC9BL,EAAQK,aAAa,KAAM,uBAC3BrC,SAASsC,KAAKC,sBAAsB,YAAaP,IAEnDA,EAAQQ,iBAAiB,QAAS,WAChCR,EAAQf,MAAMwB,QAAU,SAW1BhE,OAAOiB,GAAmBwC,EAE1B,QAEMQ,EAAMC,YAAY,WACflE,OAAOkB,KACZiD,cAAcF,GACdR,MACC,KACH,MAAOW,GACPC,QAAQC,IAAIF,GCtCdpE,OAAOkB,GAAqB,CAC1Ba,MAAM,EACNS,MAAO,OACP+B,KAAM,MACNC,MAAO,CAAC,IAAK,GAAI"}